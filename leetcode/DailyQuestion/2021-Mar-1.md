## [Mar, 2021] æ¯æ—¥ä¸€é¢˜ (1)

Let us begin!

## äºŒç»´åŒºåŸŸå’Œæ£€ç´¢ - çŸ©é˜µä¸å¯å˜

é¢˜ç›®ï¼š[304. äºŒç»´åŒºåŸŸå’Œæ£€ç´¢ - çŸ©é˜µä¸å¯å˜](https://leetcode-cn.com/problems/range-sum-query-2d-immutable/)

æ—¥æœŸï¼š2021/03/02

äºŒç»´å‰ç¼€å’Œã€‚

åŽŸå§‹å®šä¹‰ï¼š `prefix[i][j]` æ˜¯ä»Ž `[0,0] -> [i, j]` è¿™ä¸€çŸ©é˜µçš„æ‰€æœ‰å…ƒç´ ä¹‹å’Œã€‚é‚£ä¹ˆï¼š

```
prefix[i][j] = matrix[i][j] + prefix[i-1][j] + prefix[i][j-1] - prefix[i-1][j-1];
```

ä½†æ˜¯è¿™æ ·å®šä¹‰ï¼Œéœ€è¦è€ƒè™‘ `i == 0 || j == 0` æ—¶çš„æƒ…å†µï¼Œ`sumRange` ä¹Ÿä¼šå¤šå†™å‡ ä¸ª if-else ã€‚

**å»ºè®®æŒ‰ç…§åŽŸå§‹å®šä¹‰å…ˆåšä¸€éï¼Œç„¶åŽå°±ä¼šä½“ä¼šåˆ°ä¸‹é¢æ”¹è¿›æŽªæ–½çš„å¥½å¤„ã€‚**

ç®€åŒ–ä»£ç é€»è¾‘çš„å¤„ç†ï¼š

- `perfix[0][...], prefix[...][0]` åˆå§‹åŒ–ä¸º 0 ã€‚
-  `prefix[i][j]` æ˜¯ä»Ž `[0,0] -> [i-1, j-1]` è¿™ä¸€çŸ©é˜µçš„æ‰€æœ‰å…ƒç´ ä¹‹å’Œï¼Œå…¶ä¸­ï¼Œ`1 <= {i,j} <= {rows, cols} `ã€‚

æœ€åŽ `sumrange(row1, col1, row2, col2)` å°±æ˜¯ï¼š

```
prefix[row2+1][col2+1] - prefix[row1][col2+1] - prefix[row2+1][col1] + prefix[row1][col1];
```

**ä»£ç å®žçŽ°**

```cpp
class NumMatrix {
public:
    int rows = 0, cols = 0;
    vector<vector<int>> prefix;
    NumMatrix(vector<vector<int>>& matrix) {
        if (matrix.size() == 0 || matrix[0].size() == 0) return;
        rows = matrix.size(), cols = matrix[0].size();
        prefix.resize(rows+1, vector<int>(cols+1, 0));
        for (int i=1; i<=rows; i++)
            for (int j=1; j<=cols; j++)
                prefix[i][j] = matrix[i-1][j-1] + prefix[i-1][j] + prefix[i][j-1] - prefix[i-1][j-1];
        }
    
    int sumRegion(int row1, int col1, int row2, int col2) 
    {
        if (!check(row1, rows) || !check(row2, rows) ||
            !check(col1, cols) || !check(col2, cols)) return 0;
        return prefix[row2+1][col2+1] - prefix[row1][col2+1] - prefix[row2+1][col1] + prefix[row1][col1];
    }

    bool check(int x, int limit) { return 0<=x && x<limit; }
};
```



## ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜

é¢˜ç›®ï¼š[354. ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜](https://leetcode-cn.com/problems/russian-doll-envelopes/)

æ—¥æœŸï¼š2021/03/04

æŽ’åº + åŠ¨æ€è§„åˆ’ã€‚

çŠ¶æ€å®šä¹‰ï¼š`dp[i]` æ˜¯ä»¥ä¿¡å° `e[i]` ç»“å°¾çš„ï¼Œå¥—å¨ƒä¿¡å°çš„ä¸ªæ•° ðŸª†ã€‚

è½¬ç§»æ–¹ç¨‹ï¼š

```text
dp[i] = max(dp[j]+1, dp[i]), if e[j] å¯ä»¥æ”¾è¿› e[i], 0 <= j < i
dp[i] = 1, otherwise
```

ä»£ç å®žçŽ°ï¼š

```cpp
class Solution {
public:
    int maxEnvelopes(vector<vector<int>>& envelopes) {
        int n = envelopes.size();
        if (n <= 1) return n;
        sort(envelopes.begin(), envelopes.end(), [](vector<int> &x, vector<int> &y){
            return x[0] < y[0] || (x[0] == y[0] && x[1] < y[1]);
        });
        auto check = [](vector<int> &x, vector<int> &y){
            return x[0] < y[0] && x[1] < y[1];
        };
        vector<int> dp(n, 1);
        int maxval = 1;
        for (int i=1; i<n; i++)
        {
            for (int j=0; j<i; j++)
                if (check(envelopes[j], envelopes[i]))
                    dp[i] = max(dp[i], dp[j]+1);
            maxval = max(maxval, dp[i]);
        }
        return maxval;
    }
};
```

æ—¶é—´å¤æ‚åº¦ $O(n^2)$ï¼Œç©ºé—´å¤æ‚åº¦ $O(n)$ï¼Œè™½ç„¶æ•ˆçŽ‡ä½Žï¼Œä½†æ˜¯èƒ½ç”¨å•Š ðŸ˜…ðŸ˜…ðŸ˜…ðŸ˜… ã€‚